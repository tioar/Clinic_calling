<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>é™³è¬é¾è¨ºæ‰€çœ‹è¨ºé€²åº¦</title>

<!-- å…§æ–‡ï¼šNoto Sans TCï¼›è™Ÿç¢¼ï¼šManrope -->
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@700;800;900&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">

<style>
  :root{
    /* ç´«ç³»ä¸»é¡Œï¼ˆä¾ä½ çš„è‰²å¸¶ï¼‰ */
    --primary:#6B5AAE;   /* ç´« */
    --blue:#35579A;      /* è— */
    --teal:#3A8EA7;      /* é’è— */
    --soft:#C7D1E3;      /* æ·ºè— */

    --accent:#7EC845;    /* æç¤ºç¶  */
    --bg:#F4F2F8;        /* èƒŒæ™¯æ·¡ç´«ç° */
    --card:#FFFFFF;      /* å¡ç‰‡ç™½ */
    --note:#EEF3FA;      /* èªªæ˜æ¡†æ·¡è— */
    --digit-red:#DC2626; /* æ•¸å­—ç´… */
  }

  *{ box-sizing:border-box; }
  body{
    font-family:'Noto Sans TC',sans-serif;
    -webkit-font-smoothing:antialiased;
    background:var(--bg);
    margin:0;
    padding:clamp(16px,4vw,40px) max(12px,env(safe-area-inset-left)) clamp(24px,6vw,48px) max(12px,env(safe-area-inset-right));
    display:flex; justify-content:center; color:#1c1c1c;
  }
  .container{
    width:min(860px,96vw);
    background:var(--card);
    border-radius:36px;
    padding:clamp(16px,4vw,32px);
    text-align:center;
    box-shadow:0 10px 30px rgba(53,87,154,0.10);
    border:3px solid var(--primary);
  }

  /* è·‘é¦¬ç‡ˆï¼ˆç´«ï¼‰ â”€ æ”¾æ…¢ã€å¯ hover æš«åœ */
  .marquee{
    background:var(--primary); color:#fff;
    border-radius:18px;
    padding:12px 0; margin:0 auto 8px;
    overflow:hidden; white-space:nowrap;
  }
  .marquee span{
    display:inline-block; padding-left:100%;
    animation:marquee 45s linear infinite;
  }
  .marquee:hover span{ animation-play-state:paused; }
  @keyframes marquee{ 0%{transform:translateX(0)} 100%{transform:translateX(-100%)} }

  /* LOGOï¼šæ”¾å¤§ã€ç„¡é™°å½±ã€ç„¡åœ“è§’ï¼Œèˆ‡ç™½åº•èåˆ */
  .logo-wrap{ margin:10px 0 12px; }
  .logo{
    height:clamp(120px, 24vw, 200px);   /* æ”¾å¤§ */
    max-width:80vw; object-fit:contain;
    /* ç„¡é™°å½±ã€ç„¡é‚Šæ¡†ã€ç„¡åœ“è§’ */
    filter:none; border:none; border-radius:0;
    background:#fff; /* è‹¥åœ–æª”å‘¨åœæ˜¯ç™½åº•å¯è‡ªç„¶èåˆ */
    display:inline-block;
  }

  h1{
    margin:6px 0 6px; color:var(--blue);
    letter-spacing:1px;
  }
  .now-time{
    color:#6b7fa6; font-weight:700; margin-bottom:18px;
  }

  /* è™Ÿç¢¼å¡ï¼šç™½åº•ç´…å­—ï¼ˆManropeï¼Œç­‰å¯¬æ•¸å­—ï¼‰ */
  .number-display{
    display:flex; justify-content:center; gap:clamp(8px,2vw,16px);
    margin-bottom:16px; flex-wrap:nowrap;
  }
  .digit-card{
    width:clamp(72px, 22vw, 110px);
    height:clamp(92px, 28vw, 140px);
    background:#fff; color:var(--digit-red);
    font-family:'Manrope',sans-serif;
    font-variant-numeric: tabular-nums; /* å›ºå®šå­—å¯¬æ•¸å­— */
    font-size:clamp(56px,16vw,100px);
    font-weight:800; line-height:1;
    border-radius:28px;
    display:flex; align-items:center; justify-content:center;
    position:relative; perspective:400px; overflow:hidden;
    box-shadow:
      0 10px 24px rgba(107,90,174,.08),
      inset 0 0 0 3px var(--soft);
  }
  .digit-card .current, .digit-card .next{
    position:absolute; inset:0;
    display:flex; align-items:center; justify-content:center;
    backface-visibility:hidden;
  }
  .digit-card .next{ transform:rotateX(-180deg); }
  .flip .current{ animation:flipTop .5s forwards; }
  .flip .next{ animation:flipBottom .5s forwards; }
  @keyframes flipTop{0%{transform:rotateX(0)}100%{transform:rotateX(180deg)}}
  @keyframes flipBottom{0%{transform:rotateX(-180deg)}100%{transform:rotateX(0)}}

  /* èªªæ˜å€ï¼šåˆ†è¡Œç½®ä¸­ */
  .note{
    background:var(--note);
    padding:16px 20px;
    border-radius:22px;
    margin:16px auto 6px;
    box-shadow:0 4px 12px rgba(0,0,0,0.06);
    color:#274a6b; font-weight:600;
    width:min(760px,100%);
    text-align:center;
  }
  .note p{ margin:.35em 0; }

  /* é–€è¨ºè¡¨åœ–ç‰‡ */
  .schedule{
    margin-top:18px; max-width:100%;
    border-radius:20px;
    box-shadow:0 4px 12px rgba(0,0,0,0.06);
  }

  /* å½ˆå‡ºæç¤º */
  .popup{
    position:fixed; top:20px; right:20px;
    background:var(--accent); color:#fff;
    padding:14px 22px; border-radius:999px;
    font-size:20px; z-index:9999; font-weight:800;
    opacity:0; transform:translateY(-18px);
    animation:fadeInOut 3s forwards;
    box-shadow:0 10px 24px rgba(0,0,0,.18);
  }
  @keyframes fadeInOut{
    0%{opacity:0; transform:translateY(-18px)}
    10%{opacity:1; transform:translateY(0)}
    90%{opacity:1; transform:translateY(0)}
    100%{opacity:0; transform:translateY(-18px)}
  }
</style>
</head>

<body>
  <div class="container">
    <div class="marquee">
      <span>é™³è¬é¾è¨ºæ‰€é–€è¨ºæ™‚é–“ï¼šæ—©è¨º 08:00â€“11:30ï¼ˆæœ€æ™šå ±åˆ°10:30ï¼‰ï¼›åˆè¨º 14:00â€“17:00ï¼ˆæœ€æ™šå ±åˆ°16:00ï¼‰ï¼›æ™šè¨º 18:00â€“20:30ï¼ˆæœ€æ™šå ±åˆ°20:00ï¼‰ã€‚è«‹æ–¼æœ€æ™šå ±åˆ°æ™‚é–“å‰åˆ°å ´ï¼Œé€¾æ™‚è¦–åŒæ”¾æ£„ï¼Œåé¡å°‡é‡‹å‡ºçµ¦ç¾å ´æ›è™Ÿã€‚</span>
    </div>

    <!-- LOGOï¼ˆå¤§ä¸€é»ï¼Œç„¡é™°å½±ï¼‰ -->
    <div class="logo-wrap">
      <img class="logo" id="clinicLogo" src="./logo1.jpg" alt="é™³è¬é¾è¨ºæ‰€ LOGO">
    </div>

    <h1>ç›®å‰çœ‹è¨ºè™Ÿç¢¼</h1>
    <div class="now-time" id="twTime">â€”</div>

    <div class="number-display" id="numberDisplay">
      <div class="digit-card"><div class="current">0</div><div class="next">0</div></div>
      <div class="digit-card"><div class="current">0</div><div class="next">0</div></div>
      <div class="digit-card"><div class="current">0</div><div class="next">0</div></div>
    </div>

    <div class="note">
      <p>ğŸ”¸é›²ç«¯è™Ÿç¢¼åƒ…ä¾›åƒè€ƒï¼Œå«è™Ÿä»¥ç¾å ´ç‚ºæº–ã€‚æ¯ä½æ‚£è€…ç´„ 3â€“5 åˆ†é˜ï¼Œè«‹æå‰åˆ°å ´ä¸¦åœ¨å¯çœ‹åˆ°ç‡ˆè™Ÿçš„ä½ç½®ç­‰å€™ä»¥å…éè™Ÿã€‚</p>
      <p>ğŸ”¸é–€è¨ºå¯èƒ½è¦–ç¾å ´ç‹€æ³æå‰åœæ­¢æ›è™Ÿï¼Œå¦‚æœ‰ç–‘å•è«‹ä¾†é›»è¨ºæ‰€ï¼š(03)5152971ã€‚</p>
    </div>

    <img class="schedule" id="scheduleImg" src="./schedule.png" alt="é–€è¨ºæ™‚é–“è¡¨">
  </div>

  <script>
    /* åœ–ç‰‡å‚™æ´ï¼šjpg â†’ png â†’ GitHub Rawï¼ˆé¿å…è¼‰ä¸åˆ°ï¼‰ */
    (function(){
      const logo = document.getElementById('clinicLogo');
      const fallbacks = [
        './logo.png',
        'https://raw.githubusercontent.com/tioar/Clinic_calling/main/logo1.jpg',
        'https://raw.githubusercontent.com/tioar/Clinic_calling/main/logo.png'
      ];
      let i=0;
      logo.onerror = function(){
        if(i < fallbacks.length){ this.src = fallbacks[i++]; }
        else { this.style.display='none'; }
      };

      const sch = document.getElementById('scheduleImg');
      const schFallbacks = [
        'https://raw.githubusercontent.com/tioar/Clinic_calling/main/schedule.png'
      ];
      let j=0;
      sch.onerror = function(){
        if(j < schFallbacks.length){ this.src = schFallbacks[j++]; }
        else { this.style.display='none'; }
      };
    })();

    let lastNumber='000';

    function showPopup(msg){
      const popup=document.createElement('div');
      popup.className='popup';
      popup.innerText=msg;
      document.body.appendChild(popup);
      setTimeout(()=>popup.remove(),3000);
    }

    const pad3 = n => String(n).padStart(3,'0');

    function animateNumber(newNumber){
      const digits=document.querySelectorAll('#numberDisplay .digit-card');
      newNumber.split('').forEach((d,i)=>{
        const card=digits[i];
        const cur=card.querySelector('.current');
        const nxt=card.querySelector('.next');
        if(cur.innerText!==d){
          nxt.innerText=d;
          card.classList.add('flip');
          setTimeout(()=>{ cur.innerText=d; card.classList.remove('flip'); },500);
        }
      });
    }

    async function fetchNumber(){
      try{
        const res = await fetch("https://script.google.com/macros/s/AKfycbxmehGXGH_bPOD9tlOTibLzRuH35Jy3hiShjPlag2rSzpm-9c9VKTduRbc4Bjf6nifd/exec");
        const data = await res.json();
        const current = pad3(data.number);
        if(current!==lastNumber){
          animateNumber(current);
          showPopup(`è«‹ ${current} è™Ÿé€²è¨ºé–“çœ‹è¨º`);
          lastNumber=current;
        }
      }catch(err){ console.error('æŠ“è™Ÿç¢¼å¤±æ•—', err); }
    }

    function updateTWTime(){
      const el=document.getElementById('twTime');
      const now=new Date();
      el.textContent = now.toLocaleString('zh-TW',{
        timeZone:'Asia/Taipei',
        year:'numeric', month:'2-digit', day:'2-digit',
        hour:'2-digit', minute:'2-digit', second:'2-digit',
        hour12:false
      });
    }

    fetchNumber(); setInterval(fetchNumber,5000);
    updateTWTime(); setInterval(updateTWTime,1000);
  </script>
</body>
</html>
