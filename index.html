<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>é™³è¬é¾è¨ºæ‰€çœ‹è¨ºé€²åº¦</title>
<meta name="description" content="å³æ™‚çœ‹è¨ºé€²åº¦èˆ‡é–€è¨ºè³‡è¨Š">
<meta name="theme-color" content="#34558B">

<!-- ç«™å°åœ–ç¤º -->
<link rel="icon" type="image/png" href="icon.png">
<link rel="apple-touch-icon" href="apple-touch-icon.png">

<!-- è¿‘ä¼¼æ¥·é«”ï¼ˆä¸­æ–‡å‚™æ´ï¼‰ -->
<link href="https://fonts.googleapis.com/css2?family=LXGW+WenKai+TC:wght@400;500;700&display=swap" rel="stylesheet">
<!-- æ•¸å­—å­—é«”ï¼šæƒ³åˆ‡æ›åªæ”¹ --digit-font å³å¯ -->
<link href="https://fonts.googleapis.com/css2?family=Aldrich&family=Chakra+Petch:wght@700;800&family=Chivo+Mono:wght@700&family=Orbitron:wght@700&family=Teko:wght@700&display=swap" rel="stylesheet">

<style>
/* ===== é¡è‰²ï¼ˆä¾ä½ çµ¦çš„ PANTONE è—ç³»ï¼‰ ===== */
:root{
  --classic-blue:#34558B;   /* Classic Blue */
  --provence:#678FC9;       /* Provence   */
  --baby-blue:#BFD2DD;      /* Baby Blue  */
  --monument:#7B858A;       /* Monument   */
  --stucco:#9B8577;         /* Stucco     */

  --primary:var(--classic-blue);
  --accent:var(--provence);
  --line:#d9e2ef;
  --bg:#F5F7FA;
  --card:#FFFFFF;
  --note:#F2F6FB;
  --digit-red:#b91c1c;
  --digit-border:var(--primary);

  /* æ•¸å­—å­—é«”ï¼ˆæƒ³æ›å°±æ”¹é€™ä¸€è¡Œï¼‰ */
  --digit-font: 'Chakra Petch', 'Aldrich','Teko','Orbitron','Chivo Mono', ui-monospace, monospace;
}

/* ===== ä¸­æ–‡ï¼šæ¨™æ¥·é«”å„ªå…ˆ ===== */
@font-face{
  font-family:"TW-Kai";
  src:url("./fonts/TW-Kai.woff2") format("woff2");
  font-weight:400; font-style:normal; font-display:swap;
}
*{box-sizing:border-box}
html,body{width:100%;max-width:100%}
body{
  margin:0; background:var(--bg); color:#1c2430;
  /* å…¨ç«™ä¸­æ–‡æ¨™æ¥·é«”ç³» */
  font-family:
    "TW-Kai","DFKai-SB","BiauKai","KaiTi","Kaiti TC","Kaiti SC",
    "LXGW WenKai TC","STFangsong","FangSong","PingFang TC","Microsoft JhengHei",serif;
  -webkit-font-smoothing:antialiased;
  padding:clamp(16px,4vw,40px);
  display:flex; justify-content:center;
}

/* ===== ç›´è§’å¡ç‰‡ï¼ˆç„¡åœ“è§’ï¼‰ ===== */
.container{
  position:relative; width:min(860px,96vw);
  background:var(--card); border:3px solid var(--primary);
  padding:clamp(16px,4vw,28px); text-align:center;
  box-shadow:0 10px 30px rgba(52,85,139,.08);
  border-radius:0;   /* ç›´è§’ */
}

/* è·‘é¦¬ç‡ˆï¼ˆç›´è§’ï¼‰ */
.marquee{
  --gap:2rem; --speed:45s;
  background:var(--monument); color:#fff;
  border-radius:0; padding:10px 0; margin:0 auto 10px;
  overflow:hidden; white-space:nowrap; user-select:none; font-size:14px;
}
.marquee__track{ display:inline-flex; align-items:center; width:max-content; animation:marquee-loop var(--speed) linear infinite; }
.marquee__track > span{ padding-right:var(--gap); flex-shrink:0; }
.marquee:hover .marquee__track{ animation-play-state:paused; }
@keyframes marquee-loop{ from{transform:translateX(0)} to{transform:translateX(-50%)} }

.logo-wrap{ margin:10px 0 0; }
.logo{ height:clamp(120px,22vw,200px); max-width:82vw; object-fit:contain; background:#fff; border:1px solid var(--line); }

/* ç‹€æ…‹ pill æ”¹ç‚ºç›´è§’å¾½ç«  */
.pill-wrap{ display:flex; justify-content:center; margin:12px 0 4px; }
.pill{
  display:inline-flex; align-items:center; justify-content:center;
  padding:8px 14px; border:2px solid transparent; color:#fff;
  font-weight:700; letter-spacing:.5px; font-size:16px; white-space:nowrap;
  border-radius:0; /* ç›´è§’ */
}
.pill.red   { background:#C63737; }
.pill.coral { background:#E05A4F; }

.title-row{ display:flex; align-items:center; justify-content:center; gap:12px; margin:12px 0 6px; flex-wrap:wrap; }
h1{ margin:0; color:var(--primary); font-weight:700; letter-spacing:1px; }

.now-time{ color:var(--primary); font-weight:700; margin-bottom:14px; }

/* ===== å«è™Ÿæ•¸å­—ï¼šå–®ä¸€çŸ©å½¢æ¡†ã€ç›´è§’ä¸”æ›´è²¼å­— ===== */
.number-box{
  display:inline-block;
  font-family: var(--digit-font), "TW-Kai", serif;   /* æ•¸å­—å­—é«”å¯ç¨ç«‹æ› */
  font-weight:800; line-height:1;
  font-size:clamp(80px,18vw,180px);
  color:var(--digit-red);
  background:#fff;
  padding:.08em .22em;                 /* è®“æ¡†æ›´è²¼è‘—å­— */
  border:4px solid var(--digit-border);
  border-radius:0;                     /* ç›´è§’ */
  box-shadow:0 6px 14px rgba(0,0,0,.06), inset 0 0 0 3px var(--baby-blue);
  letter-spacing:.06em;
  min-width: auto;
}
.number-box.pop{ animation:pop .24s ease; }
@keyframes pop{ 0%{transform:scale(.98)} 100%{transform:scale(1)} }

/* ===== ç›´è§’é–‹é—œï¼ˆä¿ç•™å–‡å­ iconï¼‰ ===== */
.voice-row{ display:flex; align-items:center; justify-content:center; gap:10px; margin:12px 0 18px; flex-wrap:nowrap; }
.voice-label{ font-weight:800; color:var(--stucco); letter-spacing:.5px; font-size:clamp(14px,3.6vw,18px); }

/* ç›´è§’ switch */
.switch-rect{ position:relative; width:74px; height:32px; flex:0 0 auto; }
.switch-rect input{ position:absolute; inset:0; width:100%; height:100%; opacity:0; margin:0; cursor:pointer; }
.switch-rect .track{
  position:absolute; inset:0;
  background:#fff; border:2px solid var(--accent);
  border-radius:0; transition:.2s ease;
  display:grid; place-items:center; font-size:12px; color:var(--accent); font-weight:800;
}
.switch-rect .knob{
  position:absolute; top:-2px; left:-2px; width:36px; height:32px;
  background:var(--accent); border:2px solid var(--accent);
  transition:left .22s ease, background .22s ease;
  border-radius:0;   /* ç›´è§’ */
}
.switch-rect input:checked ~ .track{ border-color:var(--primary); color:var(--primary); }
.switch-rect input:checked ~ .track .knob{ left:calc(100% - 36px - 2px); background:var(--primary); }

.voice-spk{ font-size:20px; color:var(--primary); user-select:none; }

/* èªªæ˜å€èˆ‡é…è‰²æ¢ï¼ˆç›´è§’ï¼‰ */
.note{ background:var(--note); padding:14px 16px; border:1px solid var(--line); border-radius:0; margin:12px auto 10px; color:#274a6b; font-weight:700; width:min(760px,100%); text-align:center; }
.note p{ margin:.35em 0; }
.palette{ height:8px; border-radius:0; margin:8px auto 16px; width:min(560px,90%); background:linear-gradient(to right,var(--stucco) 0 22%,var(--accent) 22% 45%,var(--primary) 45% 82%,var(--baby-blue) 82% 100%); }

.schedule{ margin-top:6px; max-width:100%; border:1px solid var(--line); border-radius:0; box-shadow:0 4px 10px rgba(0,0,0,.05); }

/* è¢å¹•é–±è®€å™¨å°ˆç”¨ */
.sr-only{
  position:absolute !important; width:1px; height:1px;
  padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0);
  border:0; white-space:nowrap;
}
</style>
</head>

<body>
  <div class="container">
    <!-- è·‘é¦¬ç‡ˆï¼ˆé»ä½æš«åœï¼Œæ”¾é–‹ç¹¼çºŒï¼‰ -->
    <div class="marquee" aria-label="è¨ºæ‰€è¨Šæ¯è·‘é¦¬ç‡ˆ">
      <div class="marquee__track" id="marqueeTrack">
        <span>âœ¦ é™³è¬é¾è¨ºæ‰€é–€è¨ºæ™‚é–“ï¼šâ˜€ï¸ æ—©è¨º 08:30â€“11:30ï¼ˆæœ€æ™šå ±åˆ°10:30ï¼‰ï¼›â˜ï¸ åˆè¨º 14:00â€“17:00ï¼ˆæœ€æ™šå ±åˆ°16:00ï¼‰ï¼›â˜¾ æ™šè¨º 18:00â€“20:30ï¼ˆæœ€æ™šå ±åˆ°20:00ï¼‰ã€‚é€¾æ™‚è¦–åŒæ”¾æ£„ï¼Œåé¡å°‡é‡‹å‡ºçµ¦ç¾å ´æ›è™Ÿã€‚</span>
        <span aria-hidden="true">âœ¦ é™³è¬é¾è¨ºæ‰€é–€è¨ºæ™‚é–“ï¼šâ˜€ï¸ æ—©è¨º 08:30â€“11:30ï¼ˆæœ€æ™šå ±åˆ°10:30ï¼‰ï¼›â˜ï¸ åˆè¨º 14:00â€“17:00ï¼ˆæœ€æ™šå ±åˆ°16:00ï¼‰ï¼›â˜¾ æ™šè¨º 18:00â€“20:30ï¼ˆæœ€æ™šå ±åˆ°20:00ï¼‰ã€‚é€¾æ™‚è¦–åŒæ”¾æ£„ï¼Œåé¡å°‡é‡‹å‡ºçµ¦ç¾å ´æ›è™Ÿã€‚</span>
      </div>
    </div>

    <div class="logo-wrap">
      <img class="logo" id="clinicLogo" src="./logo1.jpg" alt="é™³è¬é¾è¨ºæ‰€ LOGO">
    </div>

    <div class="pill-wrap" aria-live="polite" id="statusPill"></div>

    <div class="title-row">
      <h1 id="sectionTitle">ç›®å‰çœ‹è¨ºè™Ÿç¢¼</h1>
    </div>

    <div class="now-time" id="twTime">â€”</div>

    <!-- å–®ä¸€ã€Œè²¼å­—ã€ç›´è§’è™Ÿç¢¼æ¡† -->
    <div id="numberBox" class="number-box" aria-live="polite" aria-atomic="true">000</div>

    <!-- ç›´è§’é–‹é—œ + å–‡å­ -->
    <div class="voice-row">
      <div class="voice-label" id="voiceText">é–‹å•ŸèªéŸ³å«è™Ÿæé†’</div>

      <label class="switch-rect" id="voiceSwitchLabel" aria-label="é–‹å•ŸèªéŸ³å«è™Ÿæé†’é–‹é—œ">
        <input type="checkbox" id="voiceToggle" role="switch" aria-checked="false" aria-labelledby="voiceText" aria-describedby="voiceHint"/>
        <div class="track">
          <div class="knob" aria-hidden="true"></div>
        </div>
      </label>

      <div class="voice-spk" aria-hidden="true">ğŸ”Š</div>
      <div id="voiceHint" class="sr-only">é–‹å•Ÿå¾Œï¼Œè™Ÿç¢¼è®Šæ›´æ™‚æœƒè‡ªå‹•èªéŸ³æ’­å ±ã€‚</div>
    </div>

    <!-- çµ¦è®€å±çš„å³æ™‚ç‹€æ…‹æç¤º -->
    <div id="srStatus" class="sr-only" aria-live="polite"></div>

    <div class="note">
      <p>â™¦ï¸ é›²ç«¯è™Ÿç¢¼åƒ…ä¾›åƒè€ƒï¼Œå¯¦éš›å«è™Ÿä»¥ç¾å ´ç‚ºæº–ã€‚æ¯ä½æ‚£è€…ç´„ 3â€“5 åˆ†é˜ï¼Œè«‹æå‰åˆ°å ´åœ¨å¯çœ‹åˆ°ç‡ˆè™Ÿçš„ä½ç½®ç­‰å€™ä»¥å…éè™Ÿã€‚</p>
      <p>â™¦ï¸ è‹¥å·²éè™Ÿè«‹å†æ¬¡å‘æ«ƒæª¯å ±åˆ°ï¼Œå°‡ä¾ç¾å ´ç‹€æ³èª¿æ•´å®‰æ’ã€‚</p>
      <p>â™¦ï¸ é–€è¨ºå¯èƒ½è¦–ç¾å ´ç‹€æ³æå‰åœæ­¢æ›è™Ÿï¼Œå¦‚æœ‰ç–‘å•è«‹ä¾†é›» (03)5152971ã€‚</p>
    </div>

    <div class="palette" aria-hidden="true"></div>
    <img class="schedule" id="scheduleImg" src="./schedule.png" alt="é–€è¨ºæ™‚é–“è¡¨">
  </div>

<script>
/* ===== è·‘é¦¬ç‡ˆæš«åœ/æ¢å¾© ===== */
(function(){
  const marquee = document.querySelector('.marquee');
  const track = document.getElementById('marqueeTrack');
  const pause = () => track.style.animationPlayState = 'paused';
  const run   = () => track.style.animationPlayState = 'running';
  marquee.addEventListener('pointerdown', pause);
  marquee.addEventListener('pointerup', run);
  marquee.addEventListener('pointerleave', run);
  marquee.addEventListener('pointercancel', run);
})();

/* åœ–ç‰‡å‚™æ´ */
(function(){
  const logo = document.getElementById('clinicLogo');
  const logoFallbacks = [
    './logo.png',
    'https://raw.githubusercontent.com/tioar/Clinic_calling/main/logo1.jpg',
    'https://raw.githubusercontent.com/tioar/Clinic_calling/main/logo.png'
  ];
  let li=0; logo.onerror = function(){ if(li<logoFallbacks.length){ this.src=logoFallbacks[li++]; } else { this.style.display='none'; } };

  const sch = document.getElementById('scheduleImg');
  const schFallbacks = ['https://raw.githubusercontent.com/tioar/Clinic_calling/main/schedule.png'];
  let si=0; sch.onerror = function(){ if(si<schFallbacks.length){ this.src=schFallbacks[si++]; } else { this.style.display='none'; } };
})();

/* ===== API è¨­å®š ===== */
const POLL_MS = 1500;           // è¼ªè©¢é–“éš”
const FETCH_TIMEOUT = 1200;     // å–®æ¬¡è«‹æ±‚é€¾æ™‚
const GAS_URL = "https://script.google.com/macros/s/AKfycbxHI3ypQqfqnEpXVDO6WJq0EQjkMWzjpIvosYGwu43MP9iiXjofRnZOzOnhAXedwCLw/exec";

let lastNumber='000';

/* ===== èªéŸ³è¨­å®š ===== */
const TTS_RATE = 0.55;
const UA = navigator.userAgent.toLowerCase();
const isWinChrome = UA.includes('windows') && UA.includes('chrome') && !UA.includes('edg');
const WARM_CANCEL_DELAY = isWinChrome ? 220 : 120;
const WARM_PLAY_DELAY   = isWinChrome ? 100 : 60;
const WARM_SAFETY_MS    = isWinChrome ? 800 : 650;

const Voice = { ready:false, unlocked:false, voices:[], zhVoice:null, enabled:false, timer:null };
function loadVoices(){
  const list = window.speechSynthesis?.getVoices?.() || [];
  Voice.voices = list;
  Voice.zhVoice =
    list.find(v => v.lang?.toLowerCase().startsWith('zh-tw')) ||
    list.find(v => v.lang?.toLowerCase().startsWith('zh-hk')) ||
    list.find(v => v.lang?.toLowerCase().startsWith('zh-cn')) ||
    list.find(v => v.lang?.toLowerCase().startsWith('zh'));
}
function unlockTTS(){
  if(!('speechSynthesis' in window)){ alert('æ­¤ç€è¦½å™¨ä¸æ”¯æ´èªéŸ³æ’­å ±'); return false; }
  loadVoices();
  if(typeof speechSynthesis.onvoiceschanged !== 'undefined'){
    speechSynthesis.onvoiceschanged = () => loadVoices();
  }
  try{ speechSynthesis.resume(); }catch(e){}
  Voice.unlocked = true; Voice.ready = true; return true;
}
function speakText(txt){
  if(!Voice.ready || !txt) return;
  if (!Voice.enabled && !speakText._oneshot) return;
  if (Voice.timer){ clearTimeout(Voice.timer); Voice.timer = null; }
  const play = () => {
    const warm = new SpeechSynthesisUtterance('\u00A0'); // ç„¡è²æš–æ©Ÿ
    warm.lang = (Voice.zhVoice && Voice.zhVoice.lang) || 'zh-TW';
    warm.rate = TTS_RATE; warm.pitch = 1; warm.volume = 0;

    const safety = setTimeout(() => {
      try{ speechSynthesis.cancel(); }catch(e){}
      reallySpeak(txt);
    }, WARM_SAFETY_MS);

    warm.onend = () => {
      clearTimeout(safety);
      setTimeout(() => reallySpeak(txt), WARM_PLAY_DELAY);
    };

    try{ speechSynthesis.resume(); }catch(e){}
    speechSynthesis.speak(warm);
  };

  if (speechSynthesis.speaking || speechSynthesis.pending){
    try{ speechSynthesis.cancel(); }catch(e){}
    setTimeout(play, WARM_CANCEL_DELAY);
  } else {
    setTimeout(play, WARM_PLAY_DELAY);
  }
}
function reallySpeak(txt){
  const safeTail = String(txt).replace(/[~ï½]+$/g,'ã€‚'); // Android å°¾å­—é˜²å‘†
  const prefix = isWinChrome ? '\u3000ï¼Œ' : '';          // Windows Chrome å¶ç™¼åé ­é˜²å‘†
  const u = new SpeechSynthesisUtterance(prefix + safeTail);
  if(!Voice.zhVoice || !Voice.voices.length) loadVoices();
  if(Voice.zhVoice) u.voice = Voice.zhVoice;
  u.lang = (Voice.zhVoice && Voice.zhVoice.lang) || 'zh-TW';
  u.rate = TTS_RATE;  u.pitch = 1;  u.volume = 1;
  u.onstart = ()=>{ try{ speechSynthesis.resume(); }catch(e){} };
  speechSynthesis.speak(u);
}
function zhRead(n){
  n = Math.max(0, Math.min(999, Math.floor(n)));
  const d = ['é›¶','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­','ä¸ƒ','å…«','ä¹'];
  if (n === 0) return 'é›¶';
  let out = '', h = Math.floor(n/100), t = Math.floor((n%100)/10), u = n%10;
  if(h>0){ out += d[h]+'ç™¾'; if(t===0 && u>0) out+='é›¶'; }
  if(t>0){ out += (t===1 && h===0 ? '' : d[t]) + 'å'; }
  if(u>0){ out += d[u]; }
  return out;
}
function speakNumber(n){
  const zh = zhRead(n);
  speakText(`${zh}è™Ÿã€${zh}è™Ÿè«‹é€²è¨ºé–“ã€‚`);
}

/* ===== ç„¡éšœç¤™æç¤º ===== */
const srStatus = document.getElementById('srStatus');
function sayToSR(text){ srStatus.textContent = text; }

/* èªéŸ³é–‹é—œ */
const voiceToggle = document.getElementById('voiceToggle');
voiceToggle.addEventListener('change', ()=>{
  voiceToggle.setAttribute('aria-checked', voiceToggle.checked ? 'true' : 'false');
  if(voiceToggle.checked){
    if(!Voice.unlocked && !unlockTTS()){ voiceToggle.checked=false; voiceToggle.setAttribute('aria-checked','false'); return; }
    Voice.enabled = true;
    speakText._oneshot = true;
    speakText('å·²é–‹å•ŸèªéŸ³å«è™Ÿæé†’ã€‚');
    speakText._oneshot = false;
    sayToSR('å·²é–‹å•ŸèªéŸ³å«è™Ÿæé†’');
  }else{
    Voice.enabled = false;
    speechSynthesis.cancel();
    sayToSR('å·²é—œé–‰èªéŸ³å«è™Ÿæé†’');
  }
});
window.addEventListener('touchend', function once(){
  if(!Voice.unlocked){ unlockTTS(); }
  window.removeEventListener('touchend', once, true);
}, true);
document.addEventListener('visibilitychange', ()=>{
  if(document.visibilityState === 'visible'){
    try{ speechSynthesis.resume(); }catch(e){}
  }
});

/* ===== æŠ“è™Ÿï¼šå…ˆ fetchï¼Œå¤±æ•—å† JSONP ===== */
async function fetchJSON() {
  const ctrl = new AbortController();
  const t = setTimeout(()=>ctrl.abort(), FETCH_TIMEOUT);
  const res = await fetch(`${GAS_URL}?ts=${Date.now()}`, { cache:'no-store', signal: ctrl.signal });
  clearTimeout(t);
  if(!res.ok) throw new Error(res.statusText);
  return res.json();
}
function fetchJSONP() {
  return new Promise((resolve, reject) => {
    const cbName = 'onClinicData_' + Date.now() + '_' + Math.floor(Math.random()*1e6);
    const s = document.createElement('script');
    const timeout = setTimeout(() => { cleanup(); reject(new Error('JSONP timeout')); }, 5000);
    window[cbName] = (data) => { cleanup(); resolve(data); };
    function cleanup(){ clearTimeout(timeout); delete window[cbName]; s.remove(); }
    s.src = `${GAS_URL}?callback=${cbName}&ts=${Date.now()}`;
    s.onerror = () => { cleanup(); reject(new Error('JSONP load error')); };
    document.head.appendChild(s);
  });
}

/* å‘ˆç¾ pillï¼ˆç›´è§’å¾½ç« ï¼‰ */
function renderStatusPill(data){
  const box = document.getElementById('statusPill');
  box.innerHTML = '';
  if (data.holiday === true){
    const el = document.createElement('div');
    el.className = 'pill red';
    el.textContent = 'ç¾åœ¨æ™‚é–“æ²’æœ‰é–€è¨ºï¼Œä¼‘è¨ºä¸­';
    box.appendChild(el);
  } else if (data.closed === true){
    const el = document.createElement('div');
    el.className = 'pill coral';
    el.textContent = 'ç•¶å‰æ™‚æ®µé–€è¨ºå·²ç¶“åœæ­¢æ›è™Ÿ';
    box.appendChild(el);
  }
}

/* æ›´æ–°è™Ÿç¢¼ï¼ˆå–®æ¡†ï¼‰ */
const numberBox = document.getElementById('numberBox');
function setNumberText(txt){
  numberBox.textContent = txt;
  numberBox.classList.remove('pop');
  // è§¸ç™¼è²¼å­—å°å½ˆè·³
  void numberBox.offsetWidth;
  numberBox.classList.add('pop');
}

async function fetchNumber(){
  try{
    const data = await fetchJSON().catch(async () => await fetchJSONP());
    renderStatusPill(data);
    const n = Number(data.number);
    if (!Number.isFinite(n) || n < 0 || n >= 1000) return;
    const current = String(n).padStart(3,'0');
    if(current !== lastNumber){
      setNumberText(current);
      sayToSR(`ç›®å‰çœ‹è¨ºè™Ÿç¢¼ï¼š${current}`);
      if (Voice.enabled) speakNumber(n);
      lastNumber = current;
    }
  }catch(err){
    // console.warn('æŠ“è™Ÿå¤±æ•—ï¼š', err?.message || err);
  }
}

/* å°ç£æ™‚é–“é¡¯ç¤º */
const pad2 = n => String(n).padStart(2,'0');
function updateTWTime(){
  const el=document.getElementById('twTime');
  const now = new Date();
  const tw = new Date(now.toLocaleString('en-US', { timeZone:'Asia/Taipei' }));
  const wMap = ['æ—¥','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­'];
  el.textContent = `${tw.getFullYear()}/${pad2(tw.getMonth()+1)}/${pad2(tw.getDate())} (${wMap[tw.getDay()]}) `
                   + `${pad2(tw.getHours())}:${pad2(tw.getMinutes())}:${pad2(tw.getSeconds())}`;
}

/* å•Ÿå‹• */
fetchNumber(); setInterval(fetchNumber, POLL_MS);
updateTWTime(); setInterval(updateTWTime, 1000);
</script>
</body>
</html>
